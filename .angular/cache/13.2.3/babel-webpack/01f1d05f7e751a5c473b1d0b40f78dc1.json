{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { FormControl, Validators } from '@angular/forms';\nimport * as moment from 'moment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../shared/storage.service\";\nimport * as i3 from \"@angular/material/form-field\";\nimport * as i4 from \"@angular/material/select\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/core\";\nimport * as i7 from \"@angular/material/input\";\nimport * as i8 from \"@angular/material/datepicker\";\nimport * as i9 from \"@angular/material/button\";\nimport * as i10 from \"@angular/material/icon\";\nconst _c0 = [\"resetBtn\"];\n\nfunction FiltersComponent_mat_option_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const rover_r12 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", rover_r12);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", rover_r12, \" \");\n  }\n}\n\nfunction FiltersComponent_mat_error_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.errorMessages.required, \" \");\n  }\n}\n\nfunction FiltersComponent_div_15_mat_option_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const camera_r14 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", camera_r14);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", camera_r14, \" \");\n  }\n}\n\nfunction FiltersComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, FiltersComponent_div_15_mat_option_1_Template, 2, 2, \"mat-option\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.cameras.curiosity);\n  }\n}\n\nfunction FiltersComponent_div_16_mat_option_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const camera_r16 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", camera_r16);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", camera_r16, \" \");\n  }\n}\n\nfunction FiltersComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, FiltersComponent_div_16_mat_option_1_Template, 2, 2, \"mat-option\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.cameras.opportunity);\n  }\n}\n\nfunction FiltersComponent_div_17_mat_option_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const camera_r18 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", camera_r18);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", camera_r18, \" \");\n  }\n}\n\nfunction FiltersComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, FiltersComponent_div_17_mat_option_1_Template, 2, 2, \"mat-option\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.cameras.spirit);\n  }\n}\n\nfunction FiltersComponent_mat_error_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r6.errorMessages.required, \" \");\n  }\n}\n\nfunction FiltersComponent_mat_option_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const dateType_r19 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", dateType_r19);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", dateType_r19, \" \");\n  }\n}\n\nfunction FiltersComponent_mat_error_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r8.errorMessages.required, \" \");\n  }\n}\n\nfunction FiltersComponent_mat_form_field_25_mat_error_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r20 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r20.errorMessages.required, \" \");\n  }\n}\n\nfunction FiltersComponent_mat_form_field_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-form-field\", 5);\n    i0.ɵɵelementStart(1, \"mat-label\");\n    i0.ɵɵtext(2, \"Sol Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 24);\n    i0.ɵɵtemplate(4, FiltersComponent_mat_form_field_25_mat_error_4_Template, 2, 1, \"mat-error\", 8);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.search.controls[\"date\"].hasError(\"required\"));\n  }\n}\n\nfunction FiltersComponent_mat_form_field_26_mat_error_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r22 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r22.errorMessages.required, \" \");\n  }\n}\n\nfunction FiltersComponent_mat_form_field_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-form-field\", 25);\n    i0.ɵɵelementStart(1, \"mat-label\");\n    i0.ɵɵtext(2, \"Earth Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 26);\n    i0.ɵɵelement(4, \"mat-datepicker-toggle\", 27);\n    i0.ɵɵelement(5, \"mat-datepicker\", null, 28);\n    i0.ɵɵtemplate(7, FiltersComponent_mat_form_field_26_mat_error_7_Template, 2, 1, \"mat-error\", 8);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r21 = i0.ɵɵreference(6);\n\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"matDatepicker\", _r21);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", _r21);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r10.search.controls[\"date\"].hasError(\"required\"));\n  }\n}\n\nexport class MyErrorStateMatcher {\n  isErrorState(control, form) {\n    const isSubmitted = form && form.submitted;\n    return !!(control && control.invalid && (control.dirty || control.touched || isSubmitted));\n  }\n\n}\nexport let FiltersComponent = /*#__PURE__*/(() => {\n  class FiltersComponent {\n    constructor(_formBuilder, _storageService) {\n      this._formBuilder = _formBuilder;\n      this._storageService = _storageService;\n      this.rovers = ['curiosity', 'opportunity', 'spirit'];\n      this.dateTypes = ['sol', 'earth'];\n      this.cameras = {\n        curiosity: ['FHAZ', 'RHAZ', 'MAST', 'CHEMCAM', 'MAHLI', 'MARDI', 'NAVCAM'],\n        opportunity: ['FHAZ', 'RHAZ', 'NAVCAM', 'PANCAM', 'MINITES'],\n        spirit: ['FHAZ', 'RHAZ', 'NAVCAM', 'PANCAM', 'MINITES']\n      };\n      this.matcher = new MyErrorStateMatcher();\n      this.calendarType = '';\n      this.roverOption = '';\n      this.searchData = new EventEmitter();\n      this.errorMessages = {\n        required: 'Required'\n      };\n      this.search = this._formBuilder.group({\n        rover: new FormControl({\n          value: ''\n        }, [Validators.required]),\n        dateType: new FormControl({\n          value: ''\n        }, [Validators.required]),\n        date: new FormControl({\n          value: ''\n        }, [Validators.required]),\n        camera: new FormControl({\n          value: ''\n        })\n      });\n    }\n\n    ngOnInit() {\n      let defaultSearch = {\n        id: 123,\n        rover: 'curiosity',\n        sol: '1000'\n      };\n      this.searchData.emit(defaultSearch);\n    }\n\n    ngAfterViewInit() {\n      if (this.resetBtn) {\n        this.resetBtn._elementRef.nativeElement.click();\n      }\n    }\n\n    parseSearchData(form) {\n      let obj = {\n        id: Math.round(Date.now() * Math.random()),\n        rover: form.value.rover\n      };\n\n      if (form.value.dateType === 'sol') {\n        obj.sol = form.value.date;\n      }\n\n      if (form.value.dateType === 'earth') {\n        obj.earth_date = moment(form.value.date).format('YYYY-MM-DD');\n      }\n\n      if (form.value.camera && form.value.camera.length) {\n        obj.camera = form.value.camera;\n      }\n\n      return obj;\n    }\n\n    resetValidation() {\n      this.search.clearValidators();\n      this.search.updateValueAndValidity();\n    }\n\n    calendarSelected(event) {\n      this.calendarType = event;\n    }\n\n    roverSelected(event) {\n      this.roverOption = event;\n    }\n\n    searchSubmit() {\n      this.searchData.emit(this.parseSearchData(this.search));\n      this.resetValidation();\n    }\n\n    addFavorite() {\n      let storedData = localStorage.getItem('favoriteSearch');\n      const searchValue = this.parseSearchData(this.search);\n      let searchValues = [];\n\n      if (!storedData) {\n        searchValues.push(searchValue);\n      } else {\n        let parsedData = JSON.parse(storedData);\n        parsedData.push(searchValue);\n        searchValues = parsedData;\n      }\n\n      this._storageService.theItem = JSON.stringify(searchValues);\n    }\n\n    resetForm(formDirective) {\n      if (formDirective) {\n        formDirective.resetForm();\n      }\n\n      this.search.reset();\n      this.calendarType = '';\n      this.roverOption = '';\n      this.resetValidation();\n    }\n\n  }\n\n  FiltersComponent.ɵfac = function FiltersComponent_Factory(t) {\n    return new (t || FiltersComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.StorageService));\n  };\n\n  FiltersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: FiltersComponent,\n    selectors: [[\"app-filters\"]],\n    viewQuery: function FiltersComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.resetBtn = _t.first);\n      }\n    },\n    outputs: {\n      searchData: \"searchData\"\n    },\n    decls: 38,\n    vars: 14,\n    consts: [[1, \"filters-container\"], [1, \"form-container\"], [1, \"form\", 3, \"formGroup\", \"ngSubmit\"], [\"formDirective\", \"ngForm\"], [1, \"inputs\"], [1, \"form-element-container\"], [\"formControlName\", \"rover\", \"placeholder\", \"Select Rover\", 3, \"errorStateMatcher\", \"selectionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"form-error\", 4, \"ngIf\"], [\"formControlName\", \"camera\", \"placeholder\", \"Select Camera\"], [4, \"ngIf\"], [\"formControlName\", \"dateType\", \"placeholder\", \"Select date type\", 3, \"selectionChange\"], [\"class\", \"form-element-container\", 4, \"ngIf\"], [\"appearance\", \"fill\", \"class\", \"form-element-container\", 4, \"ngIf\"], [1, \"buttons\"], [\"type\", \"submit\", \"mat-stroked-button\", \"\", \"color\", \"primary\", 3, \"disabled\"], [\"aria-hidden\", \"false\", \"aria-label\", \"search icon\", 1, \"material-icons\", \"color_white\"], [\"type\", \"button\", \"mat-stroked-button\", \"\", \"color\", \"primary\", 3, \"disabled\", \"click\"], [\"aria-hidden\", \"false\", \"aria-label\", \"favorite icon\", 1, \"material-icons\", \"color_white\"], [\"type\", \"button\", \"mat-stroked-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"resetBtn\", \"\"], [\"aria-hidden\", \"false\", \"aria-label\", \"delete icon\", 1, \"material-icons\", \"color_white\"], [3, \"value\"], [1, \"form-error\"], [\"type\", \"number\", \"matInput\", \"\", \"formControlName\", \"date\", \"placeholder\", \"Select sol date\"], [\"appearance\", \"fill\", 1, \"form-element-container\"], [\"matInput\", \"\", \"formControlName\", \"date\", 3, \"matDatepicker\"], [\"matSuffix\", \"\", 3, \"for\"], [\"picker\", \"\"]],\n    template: function FiltersComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r23 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"form\", 2, 3);\n        i0.ɵɵlistener(\"ngSubmit\", function FiltersComponent_Template_form_ngSubmit_2_listener() {\n          return ctx.searchSubmit();\n        });\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"mat-form-field\", 5);\n        i0.ɵɵelementStart(6, \"mat-label\");\n        i0.ɵɵtext(7, \"Rover\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"mat-select\", 6);\n        i0.ɵɵlistener(\"selectionChange\", function FiltersComponent_Template_mat_select_selectionChange_8_listener($event) {\n          return ctx.roverSelected($event.value);\n        });\n        i0.ɵɵtemplate(9, FiltersComponent_mat_option_9_Template, 2, 2, \"mat-option\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, FiltersComponent_mat_error_10_Template, 2, 1, \"mat-error\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"mat-form-field\", 5);\n        i0.ɵɵelementStart(12, \"mat-label\");\n        i0.ɵɵtext(13, \"Camera\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"mat-select\", 9);\n        i0.ɵɵtemplate(15, FiltersComponent_div_15_Template, 2, 1, \"div\", 10);\n        i0.ɵɵtemplate(16, FiltersComponent_div_16_Template, 2, 1, \"div\", 10);\n        i0.ɵɵtemplate(17, FiltersComponent_div_17_Template, 2, 1, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(18, FiltersComponent_mat_error_18_Template, 2, 1, \"mat-error\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"mat-form-field\", 5);\n        i0.ɵɵelementStart(20, \"mat-label\");\n        i0.ɵɵtext(21, \"Date Type\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"mat-select\", 11);\n        i0.ɵɵlistener(\"selectionChange\", function FiltersComponent_Template_mat_select_selectionChange_22_listener($event) {\n          return ctx.calendarSelected($event.value);\n        });\n        i0.ɵɵtemplate(23, FiltersComponent_mat_option_23_Template, 2, 2, \"mat-option\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(24, FiltersComponent_mat_error_24_Template, 2, 1, \"mat-error\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(25, FiltersComponent_mat_form_field_25_Template, 5, 1, \"mat-form-field\", 12);\n        i0.ɵɵtemplate(26, FiltersComponent_mat_form_field_26_Template, 8, 3, \"mat-form-field\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"div\", 14);\n        i0.ɵɵelementStart(28, \"button\", 15);\n        i0.ɵɵelementStart(29, \"mat-icon\", 16);\n        i0.ɵɵtext(30, \"search\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"button\", 17);\n        i0.ɵɵlistener(\"click\", function FiltersComponent_Template_button_click_31_listener() {\n          return ctx.addFavorite();\n        });\n        i0.ɵɵelementStart(32, \"mat-icon\", 18);\n        i0.ɵɵtext(33, \" favorite\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"button\", 19, 20);\n        i0.ɵɵlistener(\"click\", function FiltersComponent_Template_button_click_34_listener() {\n          i0.ɵɵrestoreView(_r23);\n\n          const _r0 = i0.ɵɵreference(3);\n\n          return ctx.resetForm(_r0);\n        });\n        i0.ɵɵelementStart(36, \"mat-icon\", 21);\n        i0.ɵɵtext(37, \" delete\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"formGroup\", ctx.search);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"errorStateMatcher\", ctx.matcher);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.rovers);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.search.controls[\"rover\"].hasError(\"required\"));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.roverOption === \"curiosity\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.roverOption === \"opportunity\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.roverOption === \"spirit\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.search.controls[\"camera\"].hasError(\"required\"));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.dateTypes);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.search.controls[\"dateType\"].hasError(\"required\"));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.calendarType === \"sol\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.calendarType === \"earth\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", !ctx.search.valid);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", !ctx.search.valid);\n      }\n    },\n    directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i3.MatFormField, i3.MatLabel, i4.MatSelect, i1.NgControlStatus, i1.FormControlName, i5.NgForOf, i6.MatOption, i5.NgIf, i3.MatError, i1.NumberValueAccessor, i7.MatInput, i1.DefaultValueAccessor, i8.MatDatepickerInput, i8.MatDatepickerToggle, i3.MatSuffix, i8.MatDatepicker, i9.MatButton, i10.MatIcon],\n    styles: [\".filters-container{padding:5px;background-color:#9c27b0}.form-element-container{margin-right:15px}.form{display:flex;width:100%;justify-content:space-between}.inputs{margin-left:15px}.buttons{display:flex;align-items:center;justify-content:space-evenly;margin-right:15px}.material-icons.color_white{color:#fff}.form-error{width:100%;height:100%;color:red}\\n\"],\n    encapsulation: 2\n  });\n  return FiltersComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}